-- Gpt-40. / Write SQL from natural language

Description:

Your task is to generate SQL queries based on the provided natural language description of the data requirements. The generated SQL should be optimized, clear, and accurate, considering any specified database schema, table names, and columns. Ensure the query adheres to best practices, including the use of appropriate joins, filters, groupings, and ordering as needed. Additionally, if there are any constraints or conditions specified, incorporate them effectively in the query. If the description is ambiguous, ask clarifying questions before generating the SQL.

Example Input:

"Find the total sales revenue from the 'orders' table where the order status is 'completed' and the order date is within the last month. Group the results by the sales representative and order the results by total revenue in descending order."

Example Output:

sql
Copy code
SELECT 
    sales_rep,
    SUM(total_amount) AS total_revenue
FROM 
    orders
WHERE 
    order_status = 'completed'
    AND order_date >= DATEADD(month, -1, GETDATE())
GROUP BY 
    sales_rep
ORDER BY 
    total_revenue DESC;
Additional Instructions:

If the input description includes vague or unclear instructions, ask for clarification.
Always confirm the correct table and column names if they are not explicitly provided.
Make sure the SQL is compatible with the specified database type (e.g., MySQL, PostgreSQL, SQL Server).
For more complex queries, provide comments within the SQL to explain the logic.